language: node_js
node_js:
  - "6.5.0"
addons:
  apt:
    packages:
      - xvfb
before_script:
  - npm install -g tslint typescript tsd
  - npm install
  - tsd install
  - export DISPLAY=':99.0'
  - Xvfb :99 -screen 0 1024x768x24 > /dev/null 2>&1 &
  - npm install webpack babel-plugin-transform-react-jsx react-dom style-loader css-loader node-sass sass-loader react babel-loader babel-core babel-preset-es2015
  - npm install electron -g --save-dev
  - npm install --save-dev electron-compilers
  - npm install --save electron-compile
script:
  - tslint --version
  - tslint $(git ls-files | grep '.ts$')
  - tsc --version
  - tsc -p src/browser
  - tsc src/renderer/*.ts --out build/src/renderer
  - tsc -p tests/browser
  - npm start
